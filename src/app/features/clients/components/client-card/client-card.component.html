<div class="client-card" [class.editing]="isEditing">
  <!-- Client Display -->
  <div *ngIf="!isEditing" class="client-display">
    <div class="client-info">
      <div class="client-name">
        {{ client.firstName }} {{ client.lastName }}
      </div>
      <div class="client-details">
        <span class="detail-item">
          <strong>Birth Date:</strong> {{ formatDate(client.birthdate) }}
        </span>
        <span class="detail-item">
          <strong>Age:</strong> {{ calculateAge(client.birthdate) }} years
        </span>
        <span class="detail-item">
          <strong>Status:</strong> 
          <span class="status-badge" [class.active]="client.isActive">
            {{ client.isActive ? 'Active' : 'Inactive' }}
          </span>
        </span>
      </div>
    </div>
    <div class="client-actions">
      <app-button 
        variant="outline" 
        (onClick)="onStartEdit()">
        Edit
      </app-button>
      <app-button 
        variant="danger" 
        (onClick)="onDeleteClient()">
        Delete
      </app-button>
    </div>
  </div>

  <!-- Client Edit Form -->
  <div *ngIf="isEditing" class="client-edit">
    <form [formGroup]="editForm" (ngSubmit)="onSaveEdit()" class="edit-form">
      <div class="form-row">
        <div class="form-group">
          <app-input
            id="editFirstName"
            label="First Name"
            [value]="editForm.get('firstName')?.value || ''"
            [errorMessage]="getFieldError('firstName')"
            (valueChange)="editForm.patchValue({firstName: $event})"
            [required]="true">
          </app-input>
        </div>
        <div class="form-group">
          <app-input
            id="editLastName"
            label="Last Name"
            [value]="editForm.get('lastName')?.value || ''"
            [errorMessage]="getFieldError('lastName')"
            (valueChange)="editForm.patchValue({lastName: $event})"
            [required]="true">
          </app-input>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <app-input
            id="editBirthdate"
            type="date"
            label="Birth Date"
            [value]="editForm.get('birthdate')?.value || ''"
            [errorMessage]="getFieldError('birthdate')"
            (valueChange)="editForm.patchValue({birthdate: $event})"
            [required]="true"
            [max]="maxDate">
          </app-input>
        </div>
                <div class="form-group">
                  <app-checkbox
                    id="editIsActive"
                    label="Active Client"
                    formControlName="isActive"
                    variant="success"
                    size="medium">
                  </app-checkbox>
                </div>
      </div>

      <div class="form-actions">
        <app-button 
          type="submit" 
          variant="success"
          [disabled]="editForm.invalid || loading">
          Save
        </app-button>
        <app-button 
          type="button" 
          variant="secondary"
          (onClick)="onCancelEdit()">
          Cancel
        </app-button>
      </div>
    </form>
  </div>
</div>
